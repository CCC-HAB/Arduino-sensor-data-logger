#include <SD.h> //Load SD card library
#include <SPI.h> //Load SPI Library


#include "Wire.h"    // imports the wire library for talking over I2C 
#include "Adafruit_BMP085.h"  // import the Pressure Sensor Library We are using Version one of Adafruit API for this sensor
Adafruit_BMP085 Sensor;  // create sensor object called mySensor

// Ok everyone so this is the base that we will have for our data output to sd card coding.

float tempC;  // Variable for holding temp in C
float pressure; //Variable for holding pressure reading
float altitude; //Variable Fo altitude
float sealevelpressure;

int chipSelect = 4; //chipSelect pin for the SD card Reader
File SensorData; //Data object you will write your sesnor data to

void setup(){
Serial.begin(9600); //turn on serial monitor
Sensor.begin();   //initialize pressure sensor mySensor

pinMode(10, OUTPUT); //Must declare 10 an output and reserve it
SD.begin(4); //Initialize the SD card reader
}

void loop() {
tempC = Sensor.readTemperature(); //Read Temperature from BMP180
pressure = Sensor.readPressure(); //Read Pressure
altitude = Sensor.readAltitude(); //Altitude
sealevelpressure = Sensor.readSealevelPressure();

SensorData = SD.open("Ein_Data.txt", FILE_WRITE);
if (SensorData) {
Serial.print("The Temp is: "); //Print Your results
Serial.print(tempC);
Serial.println(" degrees C");
Serial.print("The Pressure is: ");
Serial.print(pressure);
Serial.println(" Pa.");
Serial.print("The Altitude is: ");
Serial.print(altitude);
Serial.println(" meters");
Serial.print("The Sea Level Pressure is: ");
Serial.print(sealevelpressure);
Serial.println(" meters (calculated)");
Serial.println("");
delay(250); //for the test I have it at a 250 ms delay for our actual launch I believe a higher delay would be more ideal, and save battery power.


SensorData.print(tempC);                             //write temperature data to card
SensorData.print(",");                               //write a commma
SensorData.print(pressure);
SensorData.print(",");
SensorData.print(altitude);                        //write pressure and end the line (println)
SensorData.print(",");
SensorData.println(sealevelpressure);
SensorData.close();                                  //close the file
}
}
